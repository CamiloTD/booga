(function(a,b){if("function"==typeof define&&define.amd)define(["exports"],b);else if("undefined"!=typeof exports)b(exports);else{var c={exports:{}};b(c.exports),a.index=c.exports}})(this,function(a){"use strict";function b(a={}){let{storage:c,initial:d}=a||{},e=()=>{},f=c&&c.load()||{},g=[],h=new Proxy(e,{set(a,d,h){switch(typeof h){case"function":e[d]=h;break;case"object":f[d]=b(h,{storage:c.child(d)});break;default:("function"==typeof e[d]?null!==(h=f[d]=e[d](h)):null!==(f[d]=h))&&(c&&c.save(f),g.forEach(a=>a(d,h)));}return!0},get(a,b){return f[b]},apply(a,b,c){let[d,e]=c,h=Object.keys(e),i=Object.values(e);g.push((a,b)=>{debugger;let c=i.indexOf(a);if(c+1){let a={};a[h[c]]=b,d.setState(a)}});let j={};for(let d in e){let a=e[d];f[a]!==void 0&&(j[d]=f[a])}return j}});if(d)for(let a in d)f[a]||(h[a]=d[a]);return h}Object.defineProperty(a,"__esModule",{value:!0});class c{constructor(a){this.name=a}save(a){process.browser&&localStorage.setItem(this.name,JSON.stringify(a))}load(){return process.browser&&JSON.parse(localStorage.getItem(this.name))||{}}child(a){return new c(this.name+"-"+a)}}b.localStorage=(...a)=>new c(...a),a.default=b});
