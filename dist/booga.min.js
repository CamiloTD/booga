(function(a,b){if("function"==typeof define&&define.amd)define(["exports","react"],b);else if("undefined"!=typeof exports)b(exports,require("react"));else{var c={exports:{}};b(c.exports,a.react),a.Booga=c.exports}})(this,function(a,b){"use strict";function c(a={}){if("string"==typeof a||void 0!==a.name){let b="string"==typeof a?a:a.name;if(d[b])return d[b];"string"==typeof a&&(a={name:b})}let{storage:e,initial:f,name:g}=a||{},h=()=>{},j=e&&e.load()||{},k=[],l=new Proxy(h,{set(a,b,d){switch(typeof d){case"function":h[b]=d;break;case"object":j[b]=c(d,{storage:e.child(b)});break;default:("function"==typeof h[b]?null!==(d=j[b]=h[b](d)):null!==(j[b]=d))&&(e&&e.save(j),k.forEach(a=>a(b,d)));}return!0},get(a,b){return j[b]},apply(a,c,d){let[e,f]=d;if("function"==typeof e)return class extends b.Component{constructor(a){super(a),this.state=l(this,f,this)}async render(){return await e.apply(this,this.props,this)}};let g=Object.keys(f),h=Object.values(f);k.push((a,b)=>{debugger;let c=h.indexOf(a);if(c+1){let a={};a[g[c]]=b,e.setState(a)}});let m={};for(let b in f){let a=f[b];void 0!==j[a]&&(m[b]=j[a])}return m}});if(f)for(let a in f)j[a]||(l[a]=f[a]);return g&&(d[g]=l),l}Object.defineProperty(a,"__esModule",{value:!0});const d={};class e{constructor(a){this.name=a}save(a){process.browser&&localStorage.setItem(this.name,JSON.stringify(a))}load(){return process.browser&&JSON.parse(localStorage.getItem(this.name))||{}}child(a){return new e(this.name+"-"+a)}}c.localStorage=(...a)=>new e(...a),a.default=c});
