(function(a,b){if("function"==typeof define&&define.amd)define(["exports"],b);else if("undefined"!=typeof exports)b(exports);else{var c={exports:{}};b(c.exports),a.index=c.exports}})(this,function(a){"use strict";function b(a={}){if("string"==typeof a||void 0!==a.name){let b="string"==typeof a?a:a.name;if(c[b])return c[b];"string"==typeof a&&(a={name:b})}let{storage:d,initial:e,name:f}=a||{},g=()=>{},h=d&&d.load()||{},i=[],j=new Proxy(g,{set(a,c,e){switch(typeof e){case"function":g[c]=e;break;case"object":h[c]=b(e,{storage:d.child(c)});break;default:("function"==typeof g[c]?null!==(e=h[c]=g[c](e)):null!==(h[c]=e))&&(d&&d.save(h),i.forEach(a=>a(c,e)));}return!0},get(a,b){return h[b]},apply(a,b,c){let[d,e]=c,f=Object.keys(e),g=Object.values(e);i.push((a,b)=>{debugger;let c=g.indexOf(a);if(c+1){let a={};a[f[c]]=b,d.setState(a)}});let j={};for(let d in e){let a=e[d];void 0!==h[a]&&(j[d]=h[a])}return j}});if(e)for(let a in e)h[a]||(j[a]=e[a]);return c[f]=j,j}Object.defineProperty(a,"__esModule",{value:!0});const c={};class d{constructor(a){this.name=a}save(a){process.browser&&localStorage.setItem(this.name,JSON.stringify(a))}load(){return process.browser&&JSON.parse(localStorage.getItem(this.name))||{}}child(a){return new d(this.name+"-"+a)}}b.localStorage=(...a)=>new d(...a),a.default=b});
